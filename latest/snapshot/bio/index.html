<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="microsite">
<meta name="generator" content="Paradox, paradox-material-theme=0.6.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="microsite">
<link rel="shortcut icon" href="../assets/images/favicon.png">
<title>BIO Hierarchy · Izumi Project</title>
<link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../lib/prettify/prettify.css">
<script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../assets/stylesheets/paradox-material-theme.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../index.html" title="Izumi Project" class="md-header-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
Izumi Project
</span>
<span class="md-header-nav__topic">
BIO Hierarchy
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/7mind/izumi"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
7mind/izumi
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../index.html" title="Izumi Project" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
<a href="../index.html" title="Izumi Project">
Izumi Project
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/7mind/izumi"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
7mind/izumi
</div>
</a>

</div>
<ul>
  <li><a href="../glossary.html" class="page">Izumi Glossary</a></li>
  <li><a href="../guidelines.html" class="page">Izumi Framework Best Practices</a></li>
  <li><a href="../bio/index.html" class="active page">BIO Hierarchy</a></li>
  <li><a href="../logstage/index.html" class="page">LogStage</a></li>
  <li><a href="../distage/index.html" class="page">DIStage</a>
  <ul>
    <li><a href="../distage/basics.html" class="page">Overview</a></li>
    <li><a href="../distage/debugging.html" class="page">Debugging</a></li>
    <li><a href="../distage/advanced-features.html" class="page">Advanced Features</a></li>
    <li><a href="../distage/distage-framework.html" class="page">distage-framework</a></li>
    <li><a href="../distage/distage-framework-docker.html" class="page">distage-framework-docker</a></li>
    <li><a href="../distage/distage-testkit.html" class="page">distage-testkit</a></li>
    <li><a href="../distage/reference.html" class="page">Syntax Reference</a></li>
  </ul></li>
  <li><a href="../idealingua/index.html" class="page">IdeaLingua</a>
  <ul>
    <li><a href="../idealingua/language-reference.html" class="page">Idealingua Language Reference</a></li>
    <li><a href="../idealingua/json.html" class="page">JSON Wire Format</a></li>
    <li><a href="../idealingua/cogen.html" class="page">Code generator reference</a></li>
    <li><a href="../idealingua/cogen-circe.html" class="page">Circe serialization reference</a></li>
  </ul></li>
  <li><a href="../sbt/index.html" class="page">SBT Notes</a></li>
  <li><a href="../manifesto/index.html" class="page">Productivity and challenges</a></li>
  <li><a href="../pper/index.html" class="page">PPER Pattern</a></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../bio/index.html#bio-hierarchy" class="header">BIO Hierarchy</a>
  <ul>
    <li><a href="../bio/index.html#overview" class="header">Overview</a></li>
    <li><a href="../bio/index.html#syntax-implicit-punning" class="header">Syntax, Implicit Punning</a></li>
    <li><a href="../bio/index.html#cats-effect-compatibilty" class="header">cats-effect compatibilty</a></li>
    <li><a href="../bio/index.html#data-types" class="header">Data Types</a></li>
    <li><a href="../bio/index.html#misc-capabilities" class="header">Misc Capabilities</a></li>
    <li><a href="../bio/index.html#examples" class="header">Examples</a></li>
    <li><a href="../bio/index.html#removal-of-trifunctor-hierarchy" class="header">Removal of trifunctor hierarchy</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 1.1.1*
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../bio/index.html#bio-hierarchy" class="header">BIO Hierarchy</a>
  <ul>
    <li><a href="../bio/index.html#overview" class="header">Overview</a></li>
    <li><a href="../bio/index.html#syntax-implicit-punning" class="header">Syntax, Implicit Punning</a></li>
    <li><a href="../bio/index.html#cats-effect-compatibilty" class="header">cats-effect compatibilty</a></li>
    <li><a href="../bio/index.html#data-types" class="header">Data Types</a></li>
    <li><a href="../bio/index.html#misc-capabilities" class="header">Misc Capabilities</a></li>
    <li><a href="../bio/index.html#examples" class="header">Examples</a></li>
    <li><a href="../bio/index.html#removal-of-trifunctor-hierarchy" class="header">Removal of trifunctor hierarchy</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#bio-hierarchy" name="bio-hierarchy" class="anchor"><span class="anchor-link"></span></a>BIO Hierarchy</h1>
<p><strong>BIO</strong> is a set of typeclasses and algebras for programming in tagless final style using bifunctor effect types with variance.</p>
<p>Key syntactic features:</p>
<ol>
  <li>Ergonomic <code>F</code> summoner that is a single point of entry to all methods in the hierarchy</li>
  <li>Import-less syntax. Syntax is automatically available whenever any typeclass from the hierarchy is imported, e.g. immediately after IDE auto-import.</li>
</ol>
<p>These syntactic features allow you to write in a low ceremony, IDE-friendly and newcomer-friendly style:</p>
<pre class="prettyprint"><code class="language-scala">import izumi.functional.bio.{F, Monad2, Primitives2}

def adder[F[+_, +_]: Monad2: Primitives2](i: Int): F[Nothing, Int] =
  F.mkRef(0)
   .flatMap(ref =&gt; ref.update(_ + i) *&gt; ref.get)
</code></pre>
<p>Key semantic features:</p>
<ol>
  <li>Typed error handling with bifunctor effect types</li>
  <li>Automatic conversions to equivalent <code>cats.effect</code> instances using <code>import izumi.functional.bio.catz._</code></li>
  <li>No ambiguous implicit errors. It&rsquo;s legal to have both <code>Monad2</code> and <code>Applicative2</code> as constraints,  despite the fact that <code>Monad2</code> provides an <code>Applicative2</code>.</li>
  <li>Primitive concurrent data structures: <code>Ref</code>, <code>Promise</code>, <code>Semaphore</code></li>
</ol>
<p>To use it, add <code>fundamentals-bio</code> library:</p>
<pre class="prettyprint"><code class="language-scala">libraryDependencies += &quot;io.7mind.izumi&quot; %% &quot;fundamentals-bio&quot; % &quot;1.1.1-SNAPSHOT&quot;
</code></pre>
<p>If you&rsquo;re using Scala <code>2.12</code> you <strong>must</strong> enable <code>-Ypartial-unification</code> and either <code>-Xsource:2.13</code> or <code>-Xsource:3</code> for this library to work correctly:</p>
<pre class="prettyprint"><code class="language-scala">// REQUIRED options for Scala 2.12
scalacOptions += &quot;-Ypartial-unification&quot;
scalacOptions += &quot;-Xsource:2.13&quot; // either this
// scalacOptions += &quot;-Xsource:3&quot; // or this
</code></pre>
<p>Most likely you’ll also need to add <a href="https://github.com/typelevel/kind-projector">Kind Projector</a> plugin:</p>
<pre class="prettyprint"><code class="language-scala">addCompilerPlugin(&quot;org.typelevel&quot; % &quot;kind-projector&quot; % &quot;0.13.2&quot; cross CrossVersion.full)
</code></pre>
<h2><a href="#overview" name="overview" class="anchor"><span class="anchor-link"></span></a>Overview</h2>
<p>The following graphic shows the current <code>BIO</code> hierarchy.</p>
<p><img src="media/bio-relationship-hierarchy.svg" alt="BIO-relationship-hierarchy" /></p>
<p><a href="media/bio-relationship-hierarchy.svg">(image)</a></p>
<p>Auxiliary algebras:</p>
<p><img src="media/algebras.svg" alt="algebras" /></p>
<p><a href="media/algebras.svg">(image)</a></p>
<p>Raw inheritance hierarchy:</p>
<p><img src="media/bio-hierarchy.svg" alt="BIO-inheritance-hierarchy" /></p>
<p><a href="media/bio-hierarchy.svg">(image)</a></p>
<h2><a href="#syntax-implicit-punning" name="syntax-implicit-punning" class="anchor"><span class="anchor-link"></span></a>Syntax, Implicit Punning</h2>
<p>All implicit syntax in BIO is available automatically without wildcard imports with the help of so-called &ldquo;implicit punning&rdquo;, as in the following example:</p>
<pre class="prettyprint"><code class="language-scala">import izumi.functional.bio.Monad2

def loop[F[+_, +_]: Monad2]: F[Nothing, Nothing] = {
  val unitEffect: F[Nothing, Unit] = Monad2[F].unit
  unitEffect.flatMap(_ =&gt; loop)
}
</code></pre>
<p>Note: a <code>.flatMap</code> method is available on the <code>unitEffect</code> value of an abstract type parameter <code>F</code>, even though we did not import any syntax implicits using a wildcard import.</p>
<p>The <code>flatMap</code> method was added by the implicit punning on the <code>Monad2</code> name.  In short, implicit punning just means that instead of creating a companion object for a type with the same name as the type, we create &ldquo;companion&rdquo; implicit conversions with the same name. So that whenever you import the type, you are also always importing the syntax-providing implicit conversions.</p>
<p>This happens to be a great fit for Tagless Final Style, since nearly all TF code will import the names of the used typeclasses.</p>
<p>Implicit Punning for typeclass syntax relieves the programmer from having to manually import syntax implicits in every file in their codebase.</p>
<h2><a href="#cats-effect-compatibilty" name="cats-effect-compatibilty" class="anchor"><span class="anchor-link"></span></a>cats-effect compatibilty</h2>
<p>Import <code>izumi.functional.bio.catz._</code> for shim compatibilty with cats-effect. You can run <code>http4s</code> and all the other cats-effect libraries with just BIO typeclasses, without requiring any cats-effect typeclasses.</p>
<h2><a href="#data-types" name="data-types" class="anchor"><span class="anchor-link"></span></a>Data Types</h2>
<p><code>Ref2</code>, <code>Promise2</code> and <code>Semaphore2</code> provide basic concurrent mutable state primitives. They require a <code>Primitives2</code> capability to create. With <code>Primitiives2[F]</code> in implicit scope, use <code>F.mkRef</code>/<code>F.mkPromise</code>/<code>F.mkSemaphore</code> respectively. (See also example at top of the page)</p>
<p><code>Free</code> monad, as well as <code>FreeError</code> and <code>FreePanic</code> provide building blocks for DSLs when combined with a DSL describing functor.</p>
<p><code>Morphism1/2/3</code> provide unboxed natural transformations for functors with 1,2,3-arity respectively, with <code>Isomorphism1/2/3</code> modeling two-way transformations.</p>
<h2><a href="#misc-capabilities" name="misc-capabilities" class="anchor"><span class="anchor-link"></span></a>Misc Capabilities</h2>
<p><code>Clock1/2/3</code> gives access to current time.</p>
<p><code>Entropy1/2/3</code> models random numbers.</p>
<p><code>UnsafeRun2</code> allows executing effects (it is required for conversion to cats&rsquo; <code>ConcurrentEffect</code> which also allows unsafe running)</p>
<h2><a href="#examples" name="examples" class="anchor"><span class="anchor-link"></span></a>Examples</h2>
<p><a href="https://github.com/7mind/distage-example">distage-example</a> is a full example application written in Tagless Final Style using BIO typeclasses.</p>
<p>You may also find a video walkthrough of using BIO on Youtube by <a href="https://www.youtube.com/watch?v=ZdGK1uedAE0&t=580s">DevInsideYou — Tagless Final with BIO</a></p>
<h2><a href="#removal-of-trifunctor-hierarchy" name="removal-of-trifunctor-hierarchy" class="anchor"><span class="anchor-link"></span></a>Removal of trifunctor hierarchy</h2>
<p>Since version 1.2.0 the trifunctor hierarchy has been removed, due to the fact that since ZIO version 2.0 they cannot be implemented for ZIO and also because of lack of use.</p>
<p>See details in <a href="https://github.com/7mind/izumi/issues/2026">https://github.com/7mind/izumi/issues/2026</a></p>
</div>
<div>
<a href="https://github.com/7mind/izumi/tree/master/doc/microsite/target/mdoc/bio/00_bio.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
1.1.1*
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../guidelines.html" title="Izumi Framework Best Practices" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Izumi Framework Best Practices
</span>
</div>
</a>
<a href="../logstage/index.html" title="LogStage" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
LogStage
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
7mind.io
</div>
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="../assets/javascripts/application.583bbe55.js"></script>
<script src="../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../."}})</script>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
